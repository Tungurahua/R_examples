---
title: "R at Ecologic Institute"
author: "Albrecht Gradmann"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: ioslides_presentation
---

```{r setup,include=FALSE}
library(knitr)
opts_chunk$set(message=FALSE,results='hide')
opts_knit$set(root.dir=normalizePath('../'))
```

```{r,cache=FALSE,eval=T,echo=FALSE}
read_chunk('Example01/NUTS2choropletes_script.R')
```




## Introduction
![alt text](../resources/sdmx2.png)


## What is R



## Use of libraries
```{r libraries,results='hide',tidy=FALSE,message=FALSE}
<<libraries>>
```
Before going through the things, we will run libraries

# Getting the data
## Getting the unemployment data
We download the dataset from Eurostat
```{r get_data,message=FALSE,tidy=FALSE,cache=TRUE}
<<get_data>>
```

```{r convert_data,message=FALSE,tidy=FALSE,cache=TRUE}
<<convert_data>>
```

## Looking at the data
```{r show_tsDf, results='markup',echo=FALSE}
head(tsDf[c("FREQ","UNIT","SEX","GEO","TIME","OBS","STATUS")])
```

## Getting the empty maps
```{r download_shp,message=FALSE,tidy=F,cache=TRUE}
<<download_shp>>
```

## Reading the maps
```{r Read_shp,message=FALSE,tidy=F,cache=TRUE,warning=FALSE,results='hide'}
<<Read_shp>> 
```

```{r convert_shp,message=FALSE,tidy=F,warning=FALSE,results='hide'}
<<convert_shp>>
```

## Merge and order data
```{r merge_data,message=FALSE,tidy=F}
<<merge_data>>
```

```{r order_data,message=FALSE,tidy=F}
<<order_data>> 
```

# Plotting the data
## Creating the first draft
```{r first_plot,fig.show='hide'}
<<first_plot>>
```

## Creating the first draft
```{r first_plot2,echo=FALSE,fig.show='asis'}
<<first_plot>>
```


## Putting Europe into focus

```{r put_EU_in_focus,fig.show='hide'}
<<put_EU_in_focus>>
```

## Putting Europe into focus

```{r put_EU_in_focus2,echo=FALSE,fig.show='asis'}
<<put_EU_in_focus>>
```


## Several other steps

```{r bin_data,fig.show='hide',include=FALSE}
<<bin_data>>  
```

* Bin Data
* Fix colors and legend
* Add country borders
* change projection
* applying a theme
* adding borders for Non-EU countries


```{r set_colors,message=FALSE,tidy=F,include=FALSE}
<<set_colors>>
```

```{r add_borders,message=FALSE,tidy=F,include=FALSE}
<<add_borders>>
```

```{r change_projection,message=FALSE,tidy=F,include=FALSE}
<<change_projection>>
```


## Some window dressing
```{r window_dressing,message=FALSE,tidy=F, include=FALSE}
<<window_dressing>>
```

## The Result

```{r lastTouch, include=FALSE,cache=TRUE}
<<lastTouch>>
```




```{r final_plot,echo=FALSE}
<<final_plot>> 
```
EU 2013 Unemployment rates by NUTS2 regions, percentage of total population, both sexes Source: [Eurostat (tgs00010)](https://raw.githubusercontent.com/Tungurahua/R_examples/master/Example01/NUTS2choropletes_script.R)


# Concluding remarks and Credits

